{"version":3,"sources":["../static/js/23.8b7c013b.chunk.js","routes/Other/SpringText/index.js"],"names":["webpackJsonp","525","module","__webpack_exports__","__webpack_require__","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","__WEBPACK_IMPORTED_MODULE_1_antd_es_notification__","__WEBPACK_IMPORTED_MODULE_2_react__","__WEBPACK_IMPORTED_MODULE_2_react___default","n","_createClass","defineProperties","target","props","i","length","descriptor","key","protoProps","staticProps","SpringText","_React$Component","_ref","_temp","_this2","_ret","this","_len","arguments","args","Array","_key","getPrototypeOf","apply","concat","createText","Point","x","y","r","g","b","a","angle","Math","random","dest_x","dest_y","original_r","original_g","original_a","lastx","lasty","canvas","width","INITIAL_DISPLACEMENT","height","velx","INITIAL_VELOCITY","cos","vely","sin","target_x","target_y","moved","MOVED","moved_length","getX","getY","fleeFrom","MOUSE","FLEE_SPEED","settleTo","VELOCITY_RETENTION","SETTLE_SPEED","scatter","unit","unitVecTo","vel","SCATTER_VELOCITY","checkMove","abs","round","simpleMove","move","distanceTo","FLEE_DISTANCE","dx","dy","sqrt","d","inMotion","clear","ctx","clearRect","CLEAR_RADIUS","draw","fillStyle","beginPath","arc","SIZE","PI","fill","resizeCanvas","clientWidth","clientHeight","adjustText","COLOR","textBaseline","textAlign","font","FONT_SIZE","fillText","MESSAGE","textWidth","measureText","minX","minY","data","getImageData","isBlank","count","curr","num","w","floor","POINTS","AMOUNT","push","animate","update","MOVED_O","_this","myReq","window","requestAnimationFrame","map","document","getElementById","getContext","offsetX","getBoundingClientRect","left","addEventListener","event","clientX","clientY","open","description","style","marginTop","cancelAnimationFrame","destroy","createElement","styles","bg","id","Component","position","top"],"mappings":"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","file":"static/js/23.8b7c013b.chunk.js","sourcesContent":["webpackJsonp([23],{\n\n/***/ 525:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_antd_es_notification_style_css__ = __webpack_require__(194);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_antd_es_notification__ = __webpack_require__(195);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_react__);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var SpringText=function(_React$Component){_inherits(SpringText,_React$Component);function SpringText(){var _ref;var _temp,_this2,_ret;_classCallCheck(this,SpringText);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}return _ret=(_temp=(_this2=_possibleConstructorReturn(this,(_ref=SpringText.__proto__||Object.getPrototypeOf(SpringText)).call.apply(_ref,[this].concat(args))),_this2),_this2.createText=function(){var _this=_this2;// WRITTEN BY TRUMAN HEBERLE\nvar COLOR=\"black\";var MESSAGE='很酷炫的文字效果';var FONT_SIZE=100;var AMOUNT=3000;var CLEAR_AMOUNT=2;var SIZE=2;var INITIAL_DISPLACEMENT=100;var INITIAL_VELOCITY=5;var VELOCITY_RETENTION=0.95;var SETTLE_SPEED=0.01;var FLEE_SPEED=0.1;var FLEE_DISTANCE=50;var FLEE=true;var SCATTER_VELOCITY=30;var SCATTER=true;// MAIN\nvar CLEAR_RADIUS=Math.round(CLEAR_AMOUNT+SIZE);var MOVED_O=Array.apply(null,Array(AMOUNT)).map(function(){return null;});var canvas=document.getElementById(\"spring-text\");var ctx=canvas.getContext(\"2d\");var offsetX=canvas.getBoundingClientRect().left;var POINTS=[];var MOVED=[];var moved_length=0;var MOUSE={x:0,y:0};function Point(x,y,r,g,b,a){var angle=Math.random()*6.28;this.dest_x=x;this.dest_y=y;this.original_r=r;this.original_g=g;this.original_a=a;this.lastx=0;this.lasty=0;this.x=canvas.width/2-x+(Math.random()-0.5)*INITIAL_DISPLACEMENT;this.y=canvas.height/2-y+(Math.random()-0.5)*INITIAL_DISPLACEMENT;this.velx=INITIAL_VELOCITY*Math.cos(angle);this.vely=INITIAL_VELOCITY*Math.sin(angle);this.target_x=canvas.width/2-x;this.target_y=canvas.height/2-y;this.r=r;this.g=g;this.b=b;this.a=a;this.moved=false;MOVED[moved_length]=this;moved_length++;this.getX=function(){return this.x;};this.getY=function(){return this.y;};this.fleeFrom=function(x,y){this.velx-=(MOUSE.x-this.x)*FLEE_SPEED;this.vely-=(MOUSE.y-this.y)*FLEE_SPEED;};this.settleTo=function(x,y){this.velx=VELOCITY_RETENTION*(this.velx+(this.target_x-this.x)*SETTLE_SPEED);this.vely=VELOCITY_RETENTION*(this.vely+(this.target_y-this.y)*SETTLE_SPEED);};this.scatter=function(){var unit=this.unitVecTo(MOUSE.x,MOUSE.y);var vel=SCATTER_VELOCITY*(0.5+Math.random()/2);this.velx=-unit.x*vel;this.vely=-unit.y*vel;};this.checkMove=function(){this.moved=!Math.abs(Math.round(this.target_x-this.x))==0||!Math.abs(Math.round(this.target_y-this.y))==0||!Math.abs(Math.round(this.velx))==0||!Math.abs(Math.round(this.vely))==0;};this.simpleMove=function(){this.checkMove();if(!this.moved){return;}this.lastx=this.x;this.lasty=this.y;this.x+=this.velx;this.y+=this.vely;MOVED[moved_length]=this;moved_length++;};this.move=function(){if(this.distanceTo(MOUSE.x,MOUSE.y)<=FLEE_DISTANCE){this.fleeFrom(MOUSE.x,MOUSE.y);}else{this.settleTo(this.target_x,this.target_y);}this.simpleMove();};this.distanceTo=function(x,y){var dx=x-this.x;var dy=y-this.y;return Math.sqrt(dx*dx+dy*dy);};this.unitVecTo=function(x,y){var dx=x-this.x;var dy=y-this.y;var d=Math.sqrt(dx*dx+dy*dy);return{x:dx/d,y:dy/d};};this.inMotion=function(){return this.moved;};this.clear=function(){ctx.clearRect(this.lastx-CLEAR_RADIUS,this.lasty-CLEAR_RADIUS,CLEAR_RADIUS*2,CLEAR_RADIUS*2);};this.draw=function(){ctx.fillStyle=\"rgba(\"+this.r+\",\"+this.g+\",\"+this.b+\",\"+this.a+\")\";ctx.beginPath();ctx.arc(this.x,this.y,SIZE,0,2*Math.PI);ctx.fill();};}window.addEventListener(\"resize\",function(){resizeCanvas();adjustText();});if(FLEE){canvas.addEventListener(\"mousemove\",function(event){MOUSE.x=event.clientX-offsetX;MOUSE.y=event.clientY-66;});}if(SCATTER){canvas.addEventListener(\"click\",function(event){MOUSE.x=event.clientX-offsetX;MOUSE.y=event.clientY-66;for(var i=0;i<POINTS.length;i++){POINTS[i].scatter();}});}function resizeCanvas(){canvas.width=canvas.clientWidth;canvas.height=canvas.clientHeight;}function adjustText(){ctx.fillStyle=COLOR;ctx.textBaseline=\"middle\";ctx.textAlign=\"center\";ctx.font=FONT_SIZE+\"px Arial\";ctx.fillText(MESSAGE,canvas.width/2,canvas.height/2);var textWidth=ctx.measureText(MESSAGE).width;if(textWidth==0){return;}var minX=canvas.width/2-textWidth/2;var minY=canvas.height/2-FONT_SIZE/2;var data=ctx.getImageData(minX,minY,textWidth,FONT_SIZE).data;ctx.clearRect(0,0,canvas.width,canvas.height);var isBlank=true;for(var i=0;i<data.length;i++){if(data[i]!=0){isBlank=false;break;}}if(!isBlank){var count=0;var curr=0;var num=0;var x=0;var y=0;var w=Math.floor(textWidth);POINTS=[];while(count<AMOUNT){while(curr==0){num=Math.floor(Math.random()*data.length);curr=data[num];}num=Math.floor(num/4);x=w/2-num%w;y=FONT_SIZE/2-Math.floor(num/w);POINTS.push(new Point(x,y,data[num*4],data[num*4+1],data[num*4+2],data[num*4+3]));curr=0;count++;}}}function init(){resizeCanvas();adjustText();animate();// window.requestAnimationFrame(animate);\n}function animate(){update();draw();}function update(){for(var i=0;i<POINTS.length;i++){POINTS[i].move();}}function draw(){for(var i=0;i<moved_length;i++){MOVED[i].clear();}MOVED=MOVED_O;moved_length=0;for(var i=0;i<POINTS.length;i++){POINTS[i].draw();}_this.myReq=window.requestAnimationFrame(animate);}init();},_temp),_possibleConstructorReturn(_this2,_ret);}_createClass(SpringText,[{key:'componentDidMount',value:function componentDidMount(){this.createText();__WEBPACK_IMPORTED_MODULE_1_antd_es_notification__[\"a\" /* default */].open({description:'鼠标移入到文字上，或者鼠标点击屏幕',style:{marginTop:64}});}},{key:'componentWillUnmount',value:function componentWillUnmount(){window.cancelAnimationFrame(this.myReq);//绑定到DOM、window上的事件需要自己手动销毁吗\n__WEBPACK_IMPORTED_MODULE_1_antd_es_notification__[\"a\" /* default */].destroy();}},{key:'render',value:function render(){return __WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement('div',{style:styles.bg},__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement('canvas',{id:'spring-text',style:styles.bg}));}}]);return SpringText;}(__WEBPACK_IMPORTED_MODULE_2_react___default.a.Component);var styles={bg:{position:'absolute',top:0,left:0,width:'100%',height:'calc(100vh - 64px)'}};/* harmony default export */ __webpack_exports__[\"default\"] = (SpringText);\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/23.8b7c013b.chunk.js","import React from 'react'\r\nimport {notification} from 'antd'\r\n\r\nclass SpringText extends React.Component{\r\n  componentDidMount(){\r\n    this.createText()\r\n    notification.open({\r\n      description: '鼠标移入到文字上，或者鼠标点击屏幕',\r\n      style:{marginTop:64}\r\n    });\r\n\r\n  }\r\n  componentWillUnmount(){\r\n    window.cancelAnimationFrame(this.myReq)\r\n    //绑定到DOM、window上的事件需要自己手动销毁吗\r\n    notification.destroy()\r\n  }\r\n  createText =()=> {\r\n    const _this = this\r\n    // WRITTEN BY TRUMAN HEBERLE\r\n    const COLOR = \"black\"\r\n    const MESSAGE = '很酷炫的文字效果'\r\n\r\n    const FONT_SIZE = 100;\r\n    const AMOUNT = 3000;\r\n    const CLEAR_AMOUNT = 2;\r\n    const SIZE = 2;\r\n    const INITIAL_DISPLACEMENT = 100;\r\n    const INITIAL_VELOCITY = 5;\r\n    const VELOCITY_RETENTION = 0.95;\r\n    const SETTLE_SPEED = 0.01;\r\n    const FLEE_SPEED = 0.1;\r\n    const FLEE_DISTANCE = 50;\r\n    const FLEE = true;\r\n    const SCATTER_VELOCITY = 30;\r\n    const SCATTER = true;\r\n    \r\n// MAIN\r\n    const CLEAR_RADIUS = Math.round(CLEAR_AMOUNT + SIZE);\r\n    const MOVED_O = Array.apply(null, Array(AMOUNT)).map(function () {return null;});\r\n\r\n    const canvas = document.getElementById(\"spring-text\");\r\n    const ctx = canvas.getContext(\"2d\");\r\n    var offsetX = canvas.getBoundingClientRect().left\r\n    var POINTS = [];\r\n    var MOVED = [];\r\n    var moved_length = 0;\r\n    var MOUSE = {\r\n      x: 0,\r\n      y: 0\r\n    }\r\n\r\n    function Point(x,y,r,g,b,a) {\r\n      var angle = Math.random() * 6.28;\r\n      this.dest_x = x;\r\n      this.dest_y = y;\r\n      this.original_r = r;\r\n      this.original_g = g;\r\n      this.original_a = a;\r\n      this.lastx = 0;\r\n      this.lasty = 0;\r\n      this.x = canvas.width/2 - x + (Math.random() - 0.5) * INITIAL_DISPLACEMENT;\r\n      this.y = canvas.height/2 - y + (Math.random() - 0.5) * INITIAL_DISPLACEMENT;\r\n      this.velx = INITIAL_VELOCITY * Math.cos(angle);\r\n      this.vely = INITIAL_VELOCITY * Math.sin(angle);\r\n      this.target_x = canvas.width/2 - x;\r\n      this.target_y = canvas.height/2 - y;\r\n      this.r = r;\r\n      this.g = g;\r\n      this.b = b;\r\n      this.a = a;\r\n      this.moved = false;\r\n      MOVED[moved_length] = this;\r\n      moved_length++;\r\n\r\n      this.getX = function() {\r\n        return this.x;\r\n      }\r\n\r\n      this.getY = function() {\r\n        return this.y;\r\n      }\r\n\r\n      this.fleeFrom = function(x, y) {\r\n        this.velx -= ((MOUSE.x - this.x) * FLEE_SPEED);\r\n        this.vely -= ((MOUSE.y - this.y) * FLEE_SPEED);\r\n      }\r\n\r\n      this.settleTo = function(x, y) {\r\n        this.velx = VELOCITY_RETENTION * (this.velx + (this.target_x - this.x) * SETTLE_SPEED);\r\n        this.vely = VELOCITY_RETENTION * (this.vely + (this.target_y - this.y) * SETTLE_SPEED);\r\n      }\r\n\r\n      this.scatter = function() {\r\n        var unit = this.unitVecTo(MOUSE.x, MOUSE.y);\r\n        var vel = SCATTER_VELOCITY * (0.5 + Math.random() / 2);\r\n        this.velx = -unit.x * vel;\r\n        this.vely = -unit.y * vel;\r\n      }\r\n\r\n      this.checkMove = function() {\r\n        this.moved = (!Math.abs(Math.round(this.target_x - this.x)) == 0 || !Math.abs(Math.round(this.target_y - this.y)) == 0 || !Math.abs(Math.round(this.velx)) == 0 || !Math.abs(Math.round(this.vely)) == 0);\r\n      }\r\n\r\n      this.simpleMove = function() {\r\n        this.checkMove();\r\n        if (!this.moved) {\r\n          return;\r\n        }\r\n\r\n        this.lastx = this.x;\r\n        this.lasty = this.y;\r\n        this.x += this.velx;\r\n        this.y += this.vely;\r\n        MOVED[moved_length] = this;\r\n        moved_length++;\r\n      }\r\n\r\n      this.move = function() {\r\n        if (this.distanceTo(MOUSE.x, MOUSE.y) <= FLEE_DISTANCE) {\r\n          this.fleeFrom(MOUSE.x, MOUSE.y);\r\n        }\r\n        else {\r\n          this.settleTo(this.target_x, this.target_y);\r\n        }\r\n        this.simpleMove();\r\n      }\r\n\r\n      this.distanceTo = function(x, y) {\r\n        var dx = x - this.x;\r\n        var dy = y - this.y;\r\n        return Math.sqrt(dx*dx+ dy*dy);\r\n      }\r\n\r\n      this.unitVecTo = function(x, y) {\r\n        var dx = x - this.x;\r\n        var dy = y - this.y;\r\n        var d = Math.sqrt(dx*dx + dy*dy);\r\n        return {\r\n          x: dx / d,\r\n          y: dy / d\r\n        };\r\n      }\r\n\r\n      this.inMotion = function() {\r\n        return this.moved;\r\n      }\r\n\r\n      this.clear = function() {\r\n        ctx.clearRect(this.lastx-CLEAR_RADIUS,this.lasty-CLEAR_RADIUS,CLEAR_RADIUS*2,CLEAR_RADIUS*2);\r\n      }\r\n\r\n      this.draw = function() {\r\n        ctx.fillStyle = \"rgba(\"+this.r+\",\"+this.g+\",\"+this.b+\",\"+this.a+\")\";\r\n        ctx.beginPath();\r\n        ctx.arc(this.x,this.y,SIZE,0,2*Math.PI);\r\n        ctx.fill();\r\n      }\r\n    }\r\n\r\n    window.addEventListener(\"resize\", function() {\r\n      resizeCanvas()\r\n      adjustText()\r\n    });\r\n\r\n    if (FLEE) {\r\n      canvas.addEventListener(\"mousemove\", function(event) {\r\n        MOUSE.x = event.clientX -offsetX;\r\n        MOUSE.y = event.clientY -66;\r\n      });\r\n    }\r\n\r\n    if (SCATTER) {\r\n        canvas.addEventListener(\"click\", function(event) {\r\n        MOUSE.x = event.clientX-offsetX;\r\n        MOUSE.y = event.clientY -66 ;\r\n        for (var i=0; i<POINTS.length; i++) {\r\n          POINTS[i].scatter();\r\n        }\r\n      });\r\n    }\r\n\r\n    function resizeCanvas() {\r\n      canvas.width  = canvas.clientWidth;\r\n      canvas.height = canvas.clientHeight;\r\n    }\r\n\r\n    function adjustText() {\r\n      ctx.fillStyle = COLOR;\r\n      ctx.textBaseline = \"middle\";\r\n      ctx.textAlign = \"center\";\r\n      ctx.font = FONT_SIZE + \"px Arial\";\r\n      ctx.fillText(MESSAGE, canvas.width/2, canvas.height/2);\r\n      var textWidth = ctx.measureText(MESSAGE).width;\r\n      if (textWidth == 0) {\r\n        return;\r\n      }\r\n      var minX = canvas.width/2 - textWidth/2;\r\n      var minY = canvas.height/2 - FONT_SIZE/2;\r\n      var data = ctx.getImageData(minX, minY, textWidth, FONT_SIZE).data;\r\n      ctx.clearRect(0,0,canvas.width,canvas.height);\r\n      var isBlank = true;\r\n      for (var i=0; i<data.length; i++) {\r\n        if (data[i] != 0) {\r\n          isBlank = false;\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (!isBlank) {\r\n        var count = 0;\r\n        var curr = 0;\r\n        var num = 0;\r\n        var x = 0;\r\n        var y = 0;\r\n        var w = Math.floor(textWidth);\r\n        POINTS = [];\r\n        while (count < AMOUNT) {\r\n          while (curr == 0) {\r\n            num = Math.floor(Math.random() * data.length);\r\n            curr = data[num];\r\n          }\r\n          num = Math.floor(num / 4);\r\n          x = w/2 - num%w;\r\n          y = FONT_SIZE/2 - Math.floor(num/w);\r\n          POINTS.push(new Point(x,y,data[num*4],data[num*4 + 1],data[num*4 + 2],data[num*4 + 3]));\r\n          curr = 0;\r\n          count++;\r\n        }\r\n      }\r\n    }\r\n\r\n    function init() {\r\n      resizeCanvas()\r\n      adjustText()\r\n      animate()\r\n      // window.requestAnimationFrame(animate);\r\n    }\r\n\r\n    function animate() {\r\n      update();\r\n      draw();\r\n    }\r\n\r\n    function update() {\r\n      for (var i=0; i<POINTS.length; i++) {\r\n        POINTS[i].move()\r\n      }\r\n    }\r\n\r\n    function draw() {\r\n      for (var i=0; i<moved_length; i++) {\r\n        MOVED[i].clear();\r\n      }\r\n      MOVED = MOVED_O;\r\n      moved_length = 0;\r\n\r\n      for (var i=0; i<POINTS.length; i++) {\r\n        POINTS[i].draw()\r\n      }\r\n\r\n      _this.myReq = window.requestAnimationFrame(animate);\r\n    }\r\n\r\n    init();\r\n  }\r\n  render(){\r\n    return (\r\n      <div style={styles.bg}>\r\n        <canvas id=\"spring-text\" style={styles.bg}/>\r\n      </div>\r\n    )\r\n  }\r\n}\r\nconst styles = {\r\n  bg: {\r\n    position: 'absolute',\r\n    top: 0,\r\n    left: 0,\r\n    width: '100%',\r\n    height: 'calc(100vh - 64px)',\r\n  },\r\n}\r\nexport default SpringText\n\n\n// WEBPACK FOOTER //\n// ./src/routes/Other/SpringText/index.js"],"sourceRoot":""}